{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\fbc62\\\\OneDrive\\\\Desktop\\\\covid19\\\\src\\\\components\\\\Layout\\\\index.js\";\n\n/* eslint-disable no-unused-expressions */\n\n/* eslint-disable no-empty-pattern */\nimport React, { useContext, useEffect } from 'react';\nimport Switch from 'react-switch';\nimport { format, parseISO } from 'date-fns';\nimport { useHistory } from 'react-router-dom';\nimport { ThemeContext } from 'styled-components';\nimport { IoLogoGithub, IoLogoLinkedin, IoIosMoon, IoIosSunny } from 'react-icons/io';\nimport useSWR from 'swr';\nimport api from \"../../services/api\";\nimport AppContext from \"../../util/AppContext\";\nimport useMobileWatcher from \"../../util/useMobileWatcher\";\nimport { Container, TopBar, Link, Numbers, Content, Header, Footer, FooterLine, LastUpdated } from './styles';\n\nconst fetcher = url => api.get(url);\n\nconst Layout = ({\n  children\n}) => {\n  var _generalData$data, _generalData$data$con, _generalData$data2, _generalData$data2$re, _generalData$data3, _generalData$data3$de, _generalData$data4;\n\n  const isMobile = useMobileWatcher();\n  const {\n    location: {\n      pathname\n    }\n  } = useHistory();\n  const {\n    colors\n  } = useContext(ThemeContext);\n  const {\n    setCountriesData,\n    toggleTheme,\n    theme,\n    setDailyData\n  } = useContext(AppContext);\n  const {\n    data: generalData\n  } = useSWR('/', fetcher, {\n    suspense: true\n  });\n  const {\n    data: casesData\n  } = useSWR('/confirmed', fetcher, {\n    suspense: true,\n    revalidateOnFocus: false\n  });\n  const {\n    data: dailyData\n  } = useSWR('/daily', fetcher, {\n    suspense: true,\n    revalidateOnFocus: false\n  });\n  useEffect(() => {\n    if (casesData === null || casesData === void 0 ? void 0 : casesData.data) {\n      const formatedCountries = {\n        biggestValue: 0,\n        lowestValue: casesData.data[0].confirmed\n      };\n      casesData === null || casesData === void 0 ? void 0 : casesData.data.forEach(el => {\n        const conditionValue = formatedCountries[el.iso3];\n\n        if (conditionValue) {\n          const {\n            confirmed,\n            recovered,\n            deaths,\n            active,\n            lastUpdate,\n            ...rest\n          } = conditionValue;\n          const newValue = { ...rest,\n            confirmed: confirmed + el.confirmed,\n            deaths: deaths + el.deaths,\n            active: active + el.active,\n            lastUpdate: lastUpdate > el.lastUpdate ? lastUpdate : el.lastUpdate,\n            recovered: recovered + el.recovered\n          };\n          formatedCountries[el.iso3] = newValue;\n        } else {\n          formatedCountries[el.iso3] = el;\n        }\n\n        if (el.confirmed > formatedCountries.biggestValue) {\n          formatedCountries.biggestValue = el.confirmed;\n        }\n\n        if (el.confirmed < formatedCountries.lowestValue) {\n          formatedCountries.lowestValue = el.confirmed;\n        }\n      });\n      setCountriesData(formatedCountries);\n    }\n  }, [casesData, setCountriesData]);\n  useEffect(() => {\n    if (dailyData === null || dailyData === void 0 ? void 0 : dailyData.data) {\n      const confirmedData = [];\n      const recoveredData = [];\n      dailyData.data.forEach(el => {\n        const formatedDate = format(new Date(el.reportDate), 'MM/dd/yyyy');\n        confirmedData.push({\n          x: formatedDate,\n          y: el.totalConfirmed\n        });\n        recoveredData.push({\n          x: formatedDate,\n          y: el.totalRecovered || 0\n        });\n      });\n      setDailyData([{\n        id: 'Confirmed',\n        color: colors.confirmed,\n        data: confirmedData\n      }, {\n        id: 'Recovered',\n        color: colors.recovered,\n        data: recoveredData\n      }]);\n    }\n  }, [dailyData, setDailyData, colors]);\n  return React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, React.createElement(TopBar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, isMobile ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(Link, {\n    selected: pathname === '/',\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, \"Estat\\xEDsticas mundiais\"), React.createElement(Link, {\n    selected: pathname === '/daily',\n    to: \"/daily\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, \"Evolu\\xE7\\xE3o di\\xE1ria\")) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, React.createElement(Link, {\n    selected: pathname === '/',\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, \"Estat\\xEDsticas mundiais\"), React.createElement(Link, {\n    selected: pathname === '/daily',\n    to: \"/daily\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, \"Evolu\\xE7\\xE3o di\\xE1ria\")), isMobile ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(Switch, {\n    checkedIcon: React.createElement(IoIosMoon, {\n      color: \"white\",\n      size: 24,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }),\n    uncheckedIcon: React.createElement(IoIosSunny, {\n      color: \"white\",\n      size: 24,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }),\n    className: \"switcher\",\n    onChange: toggleTheme,\n    checked: (theme === null || theme === void 0 ? void 0 : theme.title) === 'dark',\n    onColor: \"#777777\",\n    offColor: \"#e8e8e8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  })) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, \"Light\", React.createElement(Switch, {\n    checkedIcon: false,\n    uncheckedIcon: false,\n    className: \"switcher\",\n    onChange: toggleTheme,\n    checked: (theme === null || theme === void 0 ? void 0 : theme.title) === 'dark',\n    onColor: \"#777777\",\n    offColor: \"#e8e8e8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }), \"Dark\")), React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, \"COVID-19 Estat\\xEDsticas Mundiais\"), React.createElement(Numbers, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, (generalData === null || generalData === void 0 ? void 0 : (_generalData$data = generalData.data) === null || _generalData$data === void 0 ? void 0 : (_generalData$data$con = _generalData$data.confirmed) === null || _generalData$data$con === void 0 ? void 0 : _generalData$data$con.value) || ''), React.createElement(\"small\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, \"Confirmado\")), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, (generalData === null || generalData === void 0 ? void 0 : (_generalData$data2 = generalData.data) === null || _generalData$data2 === void 0 ? void 0 : (_generalData$data2$re = _generalData$data2.recovered) === null || _generalData$data2$re === void 0 ? void 0 : _generalData$data2$re.value) || ''), React.createElement(\"small\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, \"Suspeita\")), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }, (generalData === null || generalData === void 0 ? void 0 : (_generalData$data3 = generalData.data) === null || _generalData$data3 === void 0 ? void 0 : (_generalData$data3$de = _generalData$data3.deaths) === null || _generalData$data3$de === void 0 ? void 0 : _generalData$data3$de.value) || ''), React.createElement(\"small\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, \"Mortes\")))), React.createElement(Content, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, children), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, React.createElement(LastUpdated, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, \"Ultimo update:\", ' ', format(parseISO((generalData === null || generalData === void 0 ? void 0 : (_generalData$data4 = generalData.data) === null || _generalData$data4 === void 0 ? void 0 : _generalData$data4.lastUpdate) || new Date()), 'MM/dd/yyyy, HH:mm')), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }, React.createElement(FooterLine, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }, \"Fabiano Bispo\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"https://www.linkedin.com/in/fabiano-bispo-422738109/\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }, React.createElement(IoLogoLinkedin, {\n    size: 24,\n    color: colors.primary,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  })), React.createElement(\"a\", {\n    href: \"https://github.com/fabianoobispo\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }, React.createElement(IoLogoGithub, {\n    size: 20,\n    color: colors.primary,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226\n    },\n    __self: this\n  })))))));\n};\n\nexport default Layout;","map":{"version":3,"sources":["C:/Users/fbc62/OneDrive/Desktop/covid19/src/components/Layout/index.js"],"names":["React","useContext","useEffect","Switch","format","parseISO","useHistory","ThemeContext","IoLogoGithub","IoLogoLinkedin","IoIosMoon","IoIosSunny","useSWR","api","AppContext","useMobileWatcher","Container","TopBar","Link","Numbers","Content","Header","Footer","FooterLine","LastUpdated","fetcher","url","get","Layout","children","isMobile","location","pathname","colors","setCountriesData","toggleTheme","theme","setDailyData","data","generalData","suspense","casesData","revalidateOnFocus","dailyData","formatedCountries","biggestValue","lowestValue","confirmed","forEach","el","conditionValue","iso3","recovered","deaths","active","lastUpdate","rest","newValue","confirmedData","recoveredData","formatedDate","Date","reportDate","push","x","y","totalConfirmed","totalRecovered","id","color","title","value","primary"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-expressions */\r\n/* eslint-disable no-empty-pattern */\r\nimport React, { useContext, useEffect } from 'react';\r\nimport Switch from 'react-switch';\r\nimport { format, parseISO } from 'date-fns';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { ThemeContext } from 'styled-components';\r\nimport {\r\n  IoLogoGithub,\r\n  IoLogoLinkedin,\r\n  IoIosMoon,\r\n  IoIosSunny,\r\n} from 'react-icons/io';\r\nimport useSWR from 'swr';\r\n\r\nimport api from '~/services/api';\r\nimport AppContext from '~/util/AppContext';\r\nimport useMobileWatcher from '~/util/useMobileWatcher';\r\n\r\nimport {\r\n  Container,\r\n  TopBar,\r\n  Link,\r\n  Numbers,\r\n  Content,\r\n  Header,\r\n  Footer,\r\n  FooterLine,\r\n  LastUpdated,\r\n} from './styles';\r\n\r\nconst fetcher = url => api.get(url);\r\n\r\nconst Layout = ({ children }) => {\r\n  const isMobile = useMobileWatcher();\r\n  const {\r\n    location: { pathname },\r\n  } = useHistory();\r\n\r\n  const { colors } = useContext(ThemeContext);\r\n  const { setCountriesData, toggleTheme, theme, setDailyData } = useContext(\r\n    AppContext\r\n  );\r\n\r\n  const { data: generalData } = useSWR('/', fetcher, {\r\n    suspense: true,\r\n  });\r\n\r\n  const { data: casesData } = useSWR('/confirmed', fetcher, {\r\n    suspense: true,\r\n    revalidateOnFocus: false,\r\n  });\r\n\r\n  const { data: dailyData } = useSWR('/daily', fetcher, {\r\n    suspense: true,\r\n    revalidateOnFocus: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (casesData?.data) {\r\n      const formatedCountries = {\r\n        biggestValue: 0,\r\n        lowestValue: casesData.data[0].confirmed,\r\n      };\r\n      casesData?.data.forEach(el => {\r\n        const conditionValue = formatedCountries[el.iso3];\r\n        if (conditionValue) {\r\n          const {\r\n            confirmed,\r\n            recovered,\r\n            deaths,\r\n            active,\r\n            lastUpdate,\r\n            ...rest\r\n          } = conditionValue;\r\n          const newValue = {\r\n            ...rest,\r\n            confirmed: confirmed + el.confirmed,\r\n            deaths: deaths + el.deaths,\r\n            active: active + el.active,\r\n            lastUpdate: lastUpdate > el.lastUpdate ? lastUpdate : el.lastUpdate,\r\n            recovered: recovered + el.recovered,\r\n          };\r\n\r\n          formatedCountries[el.iso3] = newValue;\r\n        } else {\r\n          formatedCountries[el.iso3] = el;\r\n        }\r\n\r\n        if (el.confirmed > formatedCountries.biggestValue) {\r\n          formatedCountries.biggestValue = el.confirmed;\r\n        }\r\n\r\n        if (el.confirmed < formatedCountries.lowestValue) {\r\n          formatedCountries.lowestValue = el.confirmed;\r\n        }\r\n      });\r\n      setCountriesData(formatedCountries);\r\n    }\r\n  }, [casesData, setCountriesData]);\r\n\r\n  useEffect(() => {\r\n    if (dailyData?.data) {\r\n      const confirmedData = [];\r\n      const recoveredData = [];\r\n      dailyData.data.forEach(el => {\r\n        const formatedDate = format(new Date(el.reportDate), 'MM/dd/yyyy');\r\n        confirmedData.push({\r\n          x: formatedDate,\r\n          y: el.totalConfirmed,\r\n        });\r\n        recoveredData.push({\r\n          x: formatedDate,\r\n          y: el.totalRecovered || 0,\r\n        });\r\n      });\r\n\r\n      setDailyData([\r\n        {\r\n          id: 'Confirmed',\r\n          color: colors.confirmed,\r\n          data: confirmedData,\r\n        },\r\n        {\r\n          id: 'Recovered',\r\n          color: colors.recovered,\r\n          data: recoveredData,\r\n        },\r\n      ]);\r\n    }\r\n  }, [dailyData, setDailyData, colors]);\r\n\r\n  return (\r\n    <Container>\r\n      <Header>\r\n        <TopBar>\r\n          {isMobile ? (\r\n            <div>\r\n              <Link selected={pathname === '/'} to=\"/\">\r\n              Estatísticas mundiais\r\n              </Link>\r\n              <Link selected={pathname === '/daily'} to=\"/daily\">\r\n              Evolução diária\r\n              </Link>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <Link selected={pathname === '/'} to=\"/\">\r\n              Estatísticas mundiais\r\n              </Link>\r\n              <Link selected={pathname === '/daily'} to=\"/daily\">\r\n               Evolução diária\r\n              </Link>\r\n            </div>\r\n          )}\r\n          {isMobile ? (\r\n            <div>\r\n              <Switch\r\n                checkedIcon={<IoIosMoon color=\"white\" size={24} />}\r\n                uncheckedIcon={<IoIosSunny color=\"white\" size={24} />}\r\n                className=\"switcher\"\r\n                onChange={toggleTheme}\r\n                checked={theme?.title === 'dark'}\r\n                onColor=\"#777777\"\r\n                offColor=\"#e8e8e8\"\r\n              />\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              Light\r\n              <Switch\r\n                checkedIcon={false}\r\n                uncheckedIcon={false}\r\n                className=\"switcher\"\r\n                onChange={toggleTheme}\r\n                checked={theme?.title === 'dark'}\r\n                onColor=\"#777777\"\r\n                offColor=\"#e8e8e8\"\r\n              />\r\n              Dark\r\n            </div>\r\n          )}\r\n        </TopBar>\r\n        <h1>COVID-19 Estatísticas Mundiais</h1>\r\n        <Numbers>\r\n          <div>\r\n            <h3>{generalData?.data?.confirmed?.value || ''}</h3>\r\n            <small>Confirmado</small>\r\n          </div>\r\n          <div>\r\n            <h3>{generalData?.data?.recovered?.value || ''}</h3>\r\n            <small>Suspeita</small>\r\n          </div>\r\n          <div>\r\n            <h3>{generalData?.data?.deaths?.value || ''}</h3>\r\n            <small>Mortes</small>\r\n          </div>\r\n        </Numbers>\r\n      </Header>\r\n      <Content>{children}</Content>\r\n      <Footer>\r\n        <LastUpdated>\r\n          Ultimo update:{' '}\r\n          {format(\r\n            parseISO(generalData?.data?.lastUpdate || new Date()),\r\n            'MM/dd/yyyy, HH:mm'\r\n          )}\r\n        </LastUpdated>\r\n        <div>\r\n         \r\n          <FooterLine>\r\n            <p>Fabiano Bispo</p>\r\n            <div>\r\n              <a\r\n                href=\"https://www.linkedin.com/in/fabiano-bispo-422738109/\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                <IoLogoLinkedin size={24} color={colors.primary} />\r\n              </a>\r\n              <a\r\n                href=\"https://github.com/fabianoobispo\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                <IoLogoGithub size={20} color={colors.primary} />\r\n              </a>\r\n            </div>\r\n          </FooterLine>\r\n        </div>\r\n      </Footer>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n"]},"metadata":{},"sourceType":"module"}